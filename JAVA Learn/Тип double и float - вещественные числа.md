## Тип `double`

> [!tip] Важно
> Никогда не используй знак " == " при сравнении чисел с плавающей точкой.
> Хороший способ сравнения вещественных чисел — ==использовать специальный класс== `BigDecimal`. Этот класс специально был создан для хранения очень больших чисел с дробной частью.

Для работы с вещественными (дробными) числами в Java используется тип `double`. ==В памяти он занимает== `8 байт` (в два раза больше, чем тип `int`) и может хранить значения в диапазоне `-1.7*10308` до `+1.7*10308`. Для сравнения: тип `int` может хранить значение в диапазоне `-2*109` до `+2*109`.

> [!tip] Важно
> В вещественных числах дробная ==часть записывается после точки==. Например, 123.456, или 2.5, или 100.00 или 0.01. Такие числа еще ==называют числами с плавающей точкой== — floating point number – компьютерное название для вещественных чисел.

> [!tip] Важно
> Кстати, кроме типа `double` ==есть еще вещественный тип== `float` (==размером всего 4 байта==). Его название как раз и происходит от floating point. Название же `double` происходит от double float. Тип `double` в два раза больше, чем `float`: `8 байт` против `4`. Его еще называют вещественное число двойной точности.

## Создание переменной типа `double`

Тип double используется для хранения вещественных чисел. Чтобы создать в коде переменную, которая будет способна хранить вещественные числа, нужно воспользоваться командой:
Где имя — это `имя` переменной.

![[Pasted image 20240211181405.png]]

Так же, как и с типом `int`, можно использовать краткую запись для создания нескольких переменных типа `double`:

![[Pasted image 20240211184651.png]]

## Присваивание целых и вещественных чисел

Было бы плохо, если бы целые числа можно было присваивать только переменным типа `int`, а вещественные — только переменным типа `double`. Хотелось бы иметь возможность преобразовывать одни числа в другие. И в Java такая возможность есть.

> [!tip] Важно
> Переменным типа `double` ==можно присваивать как вещественные, так и целые числа==. При присваивании целых чисел они просто **==преобразовываются в вещественные==**. Хотя иногда при этом ==возможна небольшая потеря точности==.

![[Pasted image 20240211185017.png]]

> [!tip] Важно
> Если в каком-то выражении участвуют целое и вещественное число, ==целое сначала преобразуется в вещественное== и только потом взаимодействует с другим вещественным числом.

![[Pasted image 20240211185113.png]]

> [!tip] Важно
> **Есть возможность** ==присваивать== переменным типа `int` ==вещественные числа==. ==Дробная часть числа при этом отбрасывается== — **число округляется вниз до целого**.
> Также компилятор требует, чтобы ==этот факт программист задокументировал явно== (чтобы другие программисты понимали, что тут происходит отбрасывание дробной части).

Общий вид этого выражения в коде такой:

![[Pasted image 20240211185405.png]]

![[Pasted image 20240211185439.png]]

## Деление целых и вещественных чисел в Java

При делении целого числа на целое остаток всегда отбрасывается. Как же тогда, скажем, поделить `5` на `2`, чтобы получить `2.5`?

Поначалу кажется, что правильный вариант такой:

![[Pasted image 20240211190104.png]]

Однако не все так просто. Дело в том, что Java-машина сначала вычислит значение выражения `5 / 2` и только потом присвоит результат в переменную `d`. А деление `5 / 2` выполнится нацело. Т.е. `d` будет содержать `2` или, если быть более точным, `2.0`

> [!tip] Важно
> Что бы получить ==при делении целых чисел вещественное==, **нужно что бы  одно из чисел, участвующих в делении, нужно записать как вещественное** (т.е. с точкой).
> Если используется переменные то ==нужно заставить Java-машину преобразовать переменные в вещественные==, **умножив их на вещественную единицу** — `1.0


Правильный вариант такой: ==хотя бы одно из чисел, участвующих в делении, нужно записать как **вещественное** (т.е. с точкой)==:

![[Pasted image 20240211190325.png]]

А как же быть с переменными? Что если у нас есть такой код:

![[Pasted image 20240211190359.png]]

Тут есть хитрое (и очевидное) решение — ==заставить Java-машину преобразовать переменные в вещественные==, **умножив их на вещественную единицу** — `1.0`

![[Pasted image 20240211190557.png]]

Обратите внимание, что у ==операций умножения и деления равный приоритет, и они выполняются слева направо, поэтому имеет значение, где именно мы умножаем на вещественную единицу==.

## Сравнение вещественных чисел
Сравнивать вещественные числа **нельзя**: ==в процессе работы с ними всегда могут возникать неожиданные эффекты из-за того, что часть значащих цифр отбрасывается==.

> [!tip] Важно
> Если два вещественных числа отличаются на очень маленькое значение, значит можно считать их равными

![[Pasted image 20240129222050.png]]

 Но это еще не все: **разница чисел** вполне ==может оказаться отрицательным числом==. Поэтому, чтобы такой подход работал, нужно сравнивать не просто разницу чисел, а **==модуль разницы чисел==**: `|a-b|`

> [!tip] Важно
>В Java есть **==специальный метод для вычисления модуля числа==** — `Math.abs()`:

![[Pasted image 20240129222652.png]]

![[Pasted image 20240129222707.png]]

Еще один хороший способ сравнения вещественных чисел — использовать специальный класс `BigDecimal`. Э==тот класс специально был создан для хранения очень больших чисел с дробной частью==. В отличие от `double` и `float`, при использовании `BigDecimal` сложение, вычитание и прочие математические операции выполняются не с помощью операторов (`+-` и т.д.), а с помощью методов.

![[Pasted image 20240211212923.png]]

